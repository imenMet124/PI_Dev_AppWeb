define(["jquery"],(function(e){const t={},n=[],o=[];let c=null;function l(e){if("Tab"===e.key){if(t.refreshFocusableElements(),0===c.length)throw Error("Invalid container, the provided element doesn't contain any focusable element.");e.shiftKey?document.activeElement!==c.at(0)&&c.includes(document.activeElement)||(c.at(-1).focus(),e.preventDefault()):document.activeElement!==c.at(-1)&&c.includes(document.activeElement)||(c.at(0).focus(),e.preventDefault())}}return t.trapFocus=function(e,u={}){let i;if("string"==typeof e?i=document.querySelector(e):e instanceof HTMLElement&&(i=e),!i)throw Error("Invalid element, provide a valid DOM element or query selector.");n.push(i),o.push(u.activeElement||document.activeElement),t.refreshFocusableElements(),c.length>0&&c.at(0).focus(),1===n.length&&document.addEventListener("keydown",l)},t.refreshFocusableElements=function(){c=e(n.at(-1)).find(":focusable").get()},t.releaseFocus=function(e){let t=null;"string"==typeof e?t=document.querySelector(e):e instanceof HTMLElement&&(t=e);const c=n.findIndex((e=>e===t));if(c>=0){o[c].focus(),o.splice(c,1),n.splice(c,1),0===n.length&&document.removeEventListener("keydown",l)}},t}));