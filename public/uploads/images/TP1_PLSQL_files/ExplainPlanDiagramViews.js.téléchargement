define(["ojs/ojcore","jquery","rappid"],(function(t,e,r){r.shapes.qpd={},r.shapes.qpd.QPOLink=r.shapes.standard.Link.define("qpd.QPOLink",{z:0,attrs:{path:{cursor:"default"},line:{targetMarker:{type:"path",fill:"transparent",d:""},sourceMarker:{d:"M 8 -3 L 1 0 L 8 3 z"},stroke:"#666666",strokeWidth:1}},labels:[]},{setLabel:function(t){this.prop("labels",[{attrs:{root:{pointerEvents:"bounding-box"},text:{cursor:"default",text:t,fill:"#666666",fontFamily:"Arial",fontSize:10},rect:{cursor:"default",stroke:"#666666",strokeWidth:1,refWidth:13,refHeight:3.4,refX:-6,refY:-2,rx:7,ry:10,"data-tooltip":"<html><p><b>Cardinality</b></p>Estimate by the query optimization approach<br>of the number of rows accessed by the operation.</html>","data-tooltip-position":"bottom"}},position:-20}])}}),r.shapes.qpd.QPObject=r.shapes.standard.BorderedRecord.define("qpd.QPObject",{size:{width:260,height:105},z:1,itemHeight:10,itemOffset:14,itemMinLabelWidth:10,padding:{top:75,left:10,right:5,bottom:5},ports:{groups:{out:{z:0,position:"bottom",attrs:{rect:{magnet:"passive",cursor:"pointer",stroke:"#666666","stroke-width":1,fill:"white",width:8,height:8,rx:2,ry:2,x:-4,y:-1},path:{fill:"none","pointer-events":"none",refX:-5,refY:-1.5,stroke:"#666666",strokeWidth:1}},markup:"<g><rect/><path/></g>"}}},attrs:{root:{magnet:!1},body:{cursor:"default",refWidth:"100%",refHeight:"100%",fill:"#FFFFFF",stroke:"#666666",rx:6,ry:6},order:{cursor:"default",refX:12.7,refY:9.4,fontFamily:"Arial",fontWeight:"bold",fontSize:8,fill:"#424242",textAnchor:"middle",text:""},orderCicle:{cursor:"default",refX:13,refY:13,fill:"transparent",stroke:"#424242",strokeWidth:"1",r:8,"data-tooltip":"<html><p><b>Execution Order</b></p>Sequential number in the order of execution.</html>","data-tooltip-position":"right"},type:{cursor:"default",refX:24,refY:8.6,fontFamily:"Arial",fontWeight:"bold",fontSize:10,fill:"#424242",text:"",textWrap:{width:-66,height:"12",ellipsis:!0},"data-tooltip":"<html><p><b>Operation and Options</b></p><b>Operation:</b> Name of the internal operation performed in this step.<br><b>Options:</b> A variation on the operation described in the OPERATION column.</html>","data-tooltip-position":"bottom"},description:{cursor:"default",refX:10,refY:25,fontFamily:"Arial",fontSize:8,fill:"#4F4F4F",text:"",textWrap:{width:-60,height:"10",ellipsis:!0},"data-tooltip":"<html><p><b>Access Predicates</b></p>Predicates used to locate rows in an access structure.<br>If it is null, object's type and name is shown.</html>","data-tooltip-position":"bottom"},ioCost:{cursor:"default",refX:10,refY:35.5,fontFamily:"Arial",fontSize:8,fill:"#424242",text:"","data-tooltip":"<html><p><b>I/O Cost</b></p>I/O cost of the operation as estimated<br>by the query optimizer's approach.<br>The value of this column is proportional<br>to the number of data blocks read by the operation.</html>","data-tooltip-position":"right"},cost:{cursor:"default",refX:10,refY:46,fontFamily:"Arial",fontSize:8,fill:"#424242",text:"","data-tooltip":"<html><p><b>Cost</b></p>Cost of the operation as estimated<br>by the optimizer's query approach.</html>","data-tooltip-position":"right"},inOut:{cursor:"default",refX:10,refY:56.5,fontFamily:"Arial",fontSize:8,fill:"#424242",text:"","data-tooltip":"<html><p><b>In-Out</b></p>Describes the type of Parallel/Serial execution.</html>","data-tooltip-position":"right"},ownBGBar:{cursor:"default",refX:30,refY:68,width:200,height:8,fill:"#ebebeb",rx:2,ry:2},totalBGCicle:{cursor:"default",refX:236,refY:24,fill:"transparent",stroke:"#ebebeb",strokeWidth:"4",r:17},ownPctBar:{cursor:"default",refX:30,refY:68,width:0,height:8,fill:"orange",rx:2,ry:2},ownPct:{cursor:"default",refX:130,refY:69,fontFamily:"Arial",fontWeight:"bold",fontSize:7,textAnchor:"middle",fill:"#424242",text:""},ownPctHint:{cursor:"default",refX:30,refY:68,width:200,height:8,fill:"transparent",rx:2,ry:2,"data-tooltip":"","data-tooltip-position":"top"},totalPct:{cursor:"default",refX:236,refY:20,fontFamily:"Arial",fontWeight:"bold",fontSize:9,textAnchor:"middle",fill:"#0096ff",text:""},totalPctCicle:{cursor:"default",refX:236,refY:24,fill:"transparent",stroke:"#0096ff",strokeWidth:"4",r:17,strokeLinecap:"round",transform:"rotate(-90deg)",strokeDasharray:"106.8142 106.8142",strokeDashoffset:"106.8142","data-tooltip":"","data-tooltip-position":"bottom"},bytes:{cursor:"default",refX:245,refY:50,fontFamily:"Arial",fontSize:8,fill:"#424242",textAnchor:"end",text:"","data-tooltip":"<html><p><b>Bytes</b><p>Estimate by the query optimization approach<br>of the number of bytes accessed by the operation.</html>","data-tooltip-position":"top"},buttonsGroups:{cursor:"default",stroke:"#424242"},forksGroups:{cursor:"default",stroke:"lightgray"},itemLabels:{cursor:"default",magnet:"passive",fontSize:8,fill:"#424242",fontFamily:"Arial"}},properties:{}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"order"},{tagName:"circle",selector:"orderCicle"},{tagName:"text",selector:"type"},{tagName:"text",selector:"totalPct"},{tagName:"text",selector:"description"},{tagName:"text",selector:"cost"},{tagName:"text",selector:"ioCost"},{tagName:"text",selector:"inOut"},{tagName:"rect",selector:"ownBGBar"},{tagName:"circle",selector:"totalBGCicle"},{tagName:"rect",selector:"ownPctBar"},{tagName:"text",selector:"ownPct"},{tagName:"rect",selector:"ownPctHint"},{tagName:"circle",selector:"totalPctCicle"},{tagName:"text",selector:"bytes"}],PLUS_SIGN:"M 1 5 9 5 M 5 1 5 9",MINUS_SIGN:"M 1 5 9 5",togglePortSign:function(t){this.portProp(t,"collapsed")?this.portProp(t,"attrs/path",{d:this.PLUS_SIGN}):this.portProp(t,"attrs/path",{d:this.MINUS_SIGN})},getOrder:function(){return this.attr("order/text")},setOrder:function(t){this.attr("order/text",t)},getType:function(){return this.attr("type/text")},setType:function(t){this.attr("type/text",t)},setPercentage:function(t,e,r,o){this.attr("ownPct/text",e+"%"),this.attr("totalPct/text",t+"%"),this.attr("ownPctHint/data-tooltip","<html><p><b>CPU Cost (in percentage)</b></p>CPU Cost of the operation as estimated by the query optimizer's approach.<br>The value of this column is proportional to the number of machine cycles<br>required for the operation.<br><br><b>Value: "+o+"</b></html>"),this.attr("totalPctCicle/data-tooltip","<html><p><b>Total CPU Cost (in percentage)</b></p>Total CPU Cost is a summary of the own cpu cost and the children's cpu costs.<br><br><b>Value: "+r+"</b></html>"),this.attr("ownPctBar/width",2*e),circumference=106.8142;let i=circumference-t/100*circumference;this.attr("totalPctCicle/strokeDashoffset",i)},setDescription:function(t){this.attr("description/text",t)},setCost:function(t){this.attr("cost/text","Cost: "+(t||0))},setIoCost:function(t){this.attr("ioCost/text","I/O Cost: "+(t||0))},setInOut:function(t){this.attr("inOut/text","In-Out: "+t)},setBytes:function(t){bytesStr=t.toString(),"B"!==bytesStr[bytesStr.length-1]&&(bytesStr+="B"),this.attr("bytes/text",bytesStr)},autoresize:function(t){var e=this.getMinimalSize(),r=Math.max(this.attributes.size.width,e.width);this.resize(r,e.height,t)},setProperties:function(t){this.prop("properties",t)},getProperties(){return this.prop("properties")},toggleItemCollapse:function(t,e){var r=this.getItemPathArray(t);if(!r)return this;r.push("collapsed");var o=!!this.prop(r);return this.toggleCollapseDT(t,!o),this.prop(r,!o,e),this.trigger("element:collapsed"),this},toggleCollapseDT(t,e){this.attributes.items[0].forEach((function(r){r.group==t&&(r.height=e?.01:20)}))},makeSelected(){this.attr("body/stroke","#0683f8"),this.attr("body/strokeWidth",2)},clearSelection(){this.attr("body/stroke","#666666"),this.attr("body/strokeWidth",1)}}),r.shapes.qpd.QPObjectView=r.shapes.standard.BorderedRecordView}));