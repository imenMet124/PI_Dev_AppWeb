apex.widget=function(e,t){"use strict";function n(e){return e.replace(/^[a-z]/,(function(e){return e.toUpperCase()}))}function o(e,t){var n;(e=e.jquery?e[0]:e)&&e.getAttribute&&(n=e.getAttribute("data-"+t));try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:i.test(n)?JSON.parse(n):n)}catch(e){}return n}var i=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,u=/[A-Z]/g,c=function(e){return"-"+e.toLowerCase()};return{waitPopup:function(e){var n,o,i;return e?(n=t('<div id="apex_wait_popup" class="apex_wait_popup"></div><div id="apex_wait_overlay" class="apex_wait_overlay"></div>').prependTo("body"),o=n.first(),e.indexOf("<img")>=0&&o.hide(),window.setTimeout((function(){o.html(e).find("img").hide().on("load",(function(){t(this).show(),o.show()}))}),10)):(n=t('<div id="apex_wait_overlay" class="apex_wait_overlay"></div>').prependTo("body"),window.setTimeout((function(){void 0!==n&&(i=apex.util.showSpinner())}),10),n.css("visibility","visible")),{remove:function(){void 0!==i&&i.remove(),n.remove(),n=void 0}}},initPageItem:function(e,t){apex.item.create(e,t)},textareaClob:{_upload:function(e,t,n){var o=$s_Split($v(e),4e3);apex.server.widget("apex_utility",{p_flow_step_id:"0",x04:"CLOB_CONTENT",x05:"SET",f01:o},{dataType:"text"}).done((function(){$s(e,n),apex.submit(t)}))},upload:function(e,t){this._upload(e,t,"")},uploadNonEmpty:function(e,t){0===$v(e).replace(/\s/g,"").length||""===$v(e)||"."===$v(e)?($s(e,""),apex.submit(t)):this._upload(e,t,".")}},contextMenuMixin:{options:{contextMenuAction:null,contextMenu:null,contextMenuId:null},_initContextMenu:function(o,i,u,c){var r=this.options,a=this,s=this.element,x=this.widgetName,p=n(x);if(r.contextMenu||r.contextMenuId)if(t.apex.menu){if(r.contextMenu){if(r.contextMenu.menubar)throw new Error(p+" contextMenu must not be a menubar");r.contextMenu._originalBeforeOpen=r.contextMenu.beforeOpen,r.contextMenu.beforeOpen=function(e,t){r.contextMenu._originalBeforeOpen&&(t.menuElement=a.contextMenu$,t[x]=s,t.selection=a.getSelection(),c&&c(t),r.contextMenu._originalBeforeOpen(e,t))},r.contextMenu._originalAfterClose=r.contextMenu.afterClose,r.contextMenu.afterClose=function(e,t){r.contextMenu._originalAfterClose&&(t.menuElement=a.contextMenu$,t[x]=s,r.contextMenu._originalAfterClose(e,t)),t.actionTookFocus||a.focus()},this.contextMenu$=t("<div style='display:none'></div>").appendTo("body"),r.contextMenuId&&(this.contextMenu$[0].id=r.contextMenuId),this.contextMenu$.menu(r.contextMenu)}else if(this.contextMenu$=t("#"+r.contextMenuId),0===this.contextMenu$.length||!this.contextMenu$.is(":apex-menu"))throw new Error(p+" contextMenuId not found");r.contextMenuAction&&e.warn(p=" contextMenuAction option ignored when contextMenu option present"),r.contextMenuAction=function(e){var n,i;"contextmenu"===e.type&&0!==e.button?a.contextMenu$.menu("toggle",e.pageX,e.pageY):(i=(n=t(e.target)).offset(),a.contextMenu$.menu("toggle",i.left,i.top+n.closest(o).outerHeight()))}}else e.warn(p+" contextMenu option ignored because menu widget not preset");function l(e){var t,n=a.options.contextMenuAction;n&&!i(e)&&(t=u(e))&&(t.length&&a._select(t,null,!0,!1),n(e),e.preventDefault())}this._on({keydown:function(e){e.shiftKey&&121===e.which&&l(e)},contextmenu:l})},_destroyContextMenu:function(){this.options.contextMenu&&this.contextMenu$&&this.contextMenu$.remove()},_checkContextMenuOptions:function(e){var t=this.options,o=n(this.widgetName);if("contextMenu"===e||"contextMenuId"===e)throw new Error(o+" "+e+" cannot be set");if("contextMenuAction"===e&&(t.contextMenu||t.contextMenuId))throw new Error(o+" contextMenuAction cannot be set when the contextMenu or contextMenuId option is used")}},getAttribute:o,_getCreateOptions:function(){var e,t,n=this.element[0],i={};if(!o(n,"defaults"))for(e in this.options)null!=(t=o(n,e.replace(u,c)))&&(i[e]=t);return i}}}(apex.debug,apex.jQuery);