define(["ojs/ojcore","knockout","jquery","../util/accessibility/focus","ojs/ojmodule-element-utils","ojs/ojmodule-element","../oj-dbt-panel-slider/loader"],(function(e,n,o,t,s){const l="explain-plan-panel-slider";let d=!1,i=null,c=null,a=null;const r={moduleConfig:n.observable(),instanceVM:null};function u(e){const n=e,o=null===n?null:n+".html";return Promise.all([s.createView({viewPath:o}),s.createViewModel({viewModelPath:n})])}function h(){u(null).then((e=>{r.moduleConfig({view:e[0],viewModel:e[1]}),r.instanceVM=null}))}function m(e){"Escape"===e.key&&r.closeOnEscape&&f.close()}function w(){i?.classList.contains("sdw-header--blocked")&&i.classList.remove("sdw-header--blocked"),c?.classList.contains("sdw-footer--blocked")&&c.classList.remove("sdw-footer--blocked"),a?.classList.contains("sdw-sidebar--blocked")&&a.classList.remove("sdw-sidebar--blocked")}h();const f={};return f.instance={id:l,moduleConfig:r.moduleConfig},f.width={SMALL:"oj-dbt-panel-slider-small-width",SMALL_AUTO:"oj-dbt-panel-slider-small-width-auto",MEDIUM:"oj-dbt-panel-slider-medium-width",MEDIUM_AUTO:"oj-dbt-panel-slider-medium-width-auto",LARGE:"oj-dbt-panel-slider-large-width",LARGE_AUTO:"oj-dbt-panel-slider-large-width-auto",EXTRA_LARGE:"oj-dbt-panel-slider-extra-large-width",EXTRA_LARGE_AUTO:"oj-dbt-panel-slider-extra-large-width-auto"},f.isOpen=function(){return d},f.close=function(){!function(){let e;t.releaseFocus("#oj-dbt-drawer-id"),o("#"+l).off("ojbeforeclose"),document.getElementById("explain-plan-panel-slider").style.zIndex=-1,e=r.instanceVM?.canClose&&"function"==typeof r.instanceVM?.canClose?Promise.resolve(r.instanceVM.canClose()):Promise.resolve(!0),Promise.resolve(e).then((function(e){if(e)return d=!1,w(),document.documentElement.removeEventListener("keydown",m),document.getElementById(l).closeSlider().then((()=>{const e=r.instanceVM;["disconnected","handleDetached","handleDeactivated","dispose"].forEach((n=>{e[n]&&"function"==typeof e[n]&&e[n].call(e)})),h()}))}))}()},f.open=function(n){return o("#"+l).on("ojbeforeclose",(function(){return!1})),i=document.getElementById("main-header"),c=document.getElementById("main-footer"),a=document.getElementById("main-sidebar"),d=!0,i&&!i.classList.contains("sdw-header--blocked")&&i.classList.add("sdw-header--blocked"),c&&!c.classList.contains("sdw-footer--blocked")&&c.classList.add("sdw-footer--blocked"),a&&!a.classList.contains("sdw-sidebar--blocked")&&a.classList.add("sdw-sidebar--blocked"),t.trapFocus("#oj-dbt-drawer-id"),new Promise(((t,s)=>{u(n.path).then((d=>{const i=o.Deferred();i.then(t).catch(s);const c=new(0,d[1])(n.args||{});c.prom=i,c._sliderManager={close:f.close,hide:f.hide},r.moduleConfig({view:d[0],viewModel:c}),r.instanceVM=c,r.closeOnEscape="boolean"!=typeof n.closeOnEscape||n.closeOnEscape;const a={onCancel:n.onCancel,title:n.title,titleIcon:n.titleIcon,closeOnEscape:!1,zIndex:"number"==typeof n.zIndex?(u=n.zIndex,1e4!==u&&e.Logger.console.warn("Z-index value out of standards, should be 10000."),u):1e4};var u;n.cssWidthClass?a.cssWidthClass=n.cssWidthClass:n.width?a.cssWidthClass=n.width:a.cssWidthClass=f.width.LARGE,document.getElementById(l).openSlider(a).then((()=>{["connected","initialize","handleActivated","handleAttached","handleBindingsApplied"].forEach((e=>{c[e]&&"function"==typeof c[e]&&c[e].call(c)}))})),document.documentElement.addEventListener("keydown",m)})).catch((n=>{e.Logger.error("An error occurred while loading the module",n),w()}))}))},f.show=f.open,f.hide=f.close,f}));